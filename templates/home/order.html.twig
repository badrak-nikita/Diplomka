{% extends 'base.html.twig' %}

{% block body %}
    <link href="/assets/css/order.css" rel="stylesheet">
    <link href="/assets/css/labels.css" rel="stylesheet">
    {% include 'components/header.html.twig' %}

    <main class="main">

        <section id="hero" class="about section mt-5">
            <div class="container" data-aos="fade-up" data-aos-delay="100">

                <div class="container section-title" data-aos="fade-up">
                    <h2>Створення замовлення</h2>
                    <p>Заповніть форму нижче і ми зв'яжемося з вами найближчим часом</p>
                </div>

                <form action="{{ path('app_order_create') }}" method="POST" enctype="multipart/form-data">
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <div class="card p-4" style="background-color: #f8fcff; border-radius: 15px; border: none;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-wrapper">
                                            <input type="text" class="form-control required" name="fullName" id="fullName" placeholder="" value="{{ user ? user.username : '' }}" required>
                                            <label for="fullName">Ваше ім'я</label>
                                        </div>
                                        <div class="input-wrapper">
                                            <input type="email" class="form-control required" name="email" id="email" placeholder="" value="{{ user ? user.email : '' }}" required>
                                            <label for="email">Ел. Пошта</label>
                                        </div>
                                        <div class="input-wrapper">
                                            <input type="tel" class="form-control" name="phone" id="phone" placeholder="" value="{{ user ? user.phone : '' }}">
                                            <label for="phone">Телефон</label>
                                        </div>
                                        <div class="mb-3">
                                            <input type="file" class="d-none" id="fileInput" name="fileInput" />
                                            <label for="fileInput" class="file-label">Прикрiпити файл</label>
                                            <div id="fileName" class="mt-2">
                                                <img src="{{ asset('assets/img/file.png') }}" alt="File Icon" style="width: 20px; height: 20px; vertical-align: middle; display: none;" id="fileIcon">
                                                <span id="fileText" style="margin-left: 5px;"></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="input-wrapper">
                                            <select class="form-select required" name="service" id="service" required>
                                                <option value="" disabled selected></option>
                                                {% for service in services %}
                                                    <option value="{{ service.id }}">{{ service.serviceName }}</option>
                                                {% endfor %}
                                            </select>
                                            <label for="service">Послуга</label>
                                        </div>
                                        <div class="input-wrapper">
                                            <input type="text" class="form-control required" name="subject" id="subject" placeholder="" required>
                                            <label for="subject">Предмет</label>
                                        </div>

                                        <div class="input-wrapper">
                                            <input type="text" class="form-control required" name="topic" id="topic" placeholder="" required>
                                            <label for="topic">Тема</label>
                                        </div>

                                        <div class="textarea-input-wrapper">
                                            <textarea class="form-control" name="wishes" id="wishes" rows="3" placeholder=""></textarea>
                                            <label class="textarea-input-wrapper" for="wishes">Побажання</label>
                                        </div>

                                        <div class="input-wrapper">
                                            <input type="date" class="form-control" name="deadline" id="deadline" placeholder="">
                                            <label for="deadline">Бажаний дедлайн</label>
                                        </div>

                                        <div class="input-wrapper">
                                            <input type="text" class="form-control required" name="telegram" id="telegram" placeholder="" value="{{ user ? user.telegram : '' }}">
                                            <label for="telegram">Ваш телеграм</label>
                                        </div>
                                    </div>
                                </div>
                                <button class="order-btn" style="width: auto; margin: 20px auto 0; display: block;" type="submit">Створити замовлення</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>

    </main>

    {% include 'components/footer.html.twig' %}

    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <script>
        document.getElementById('fileInput').addEventListener('change', function() {
            const fileName = this.files[0] ? this.files[0].name : '';
            const fileText = document.getElementById('fileText');
            const fileIcon = document.getElementById('fileIcon');

            if (fileName) {
                fileIcon.style.display = 'inline';
                fileText.textContent = fileName;
            } else {
                fileIcon.style.display = 'none';
                fileText.textContent = '';
            }
        });
    </script>
{% endblock %}
